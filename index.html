<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historical Traditions Explorer: Meta-Constructor Lens</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .tradition-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .tradition-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        
        .tradition-card.expanded {
            transform: none;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .timeline-item {
            position: relative;
        }
        
        .timeline-line {
            position: absolute;
            left: 20px;
            top: 40px;
            bottom: -20px;
            width: 3px;
            background: linear-gradient(to bottom, #667eea, #764ba2);
        }
        
        .comparison-cell {
            min-height: 100px;
        }
        
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 10;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-button {
            transition: all 0.2s ease;
        }
        
        .tab-button.active {
            border-bottom: 3px solid #667eea;
            color: #667eea;
            font-weight: 600;
        }
        
        .integration-node {
            transition: all 0.3s ease;
        }
        
        .integration-node:hover {
            transform: scale(1.05);
        }
        
        .scenario-card {
            border-left: 4px solid #e5e7eb;
            transition: border-color 0.3s ease;
        }
        
        .scenario-card:hover {
            border-left-color: #667eea;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Data: Traditions
        const TRADITIONS = {
            aristotle: {
                id: 'aristotle',
                name: 'Aristotle',
                tradition: 'Virtue Ethics',
                period: '384-322 BCE',
                icon: 'üèõÔ∏è',
                color: 'blue',
                tagline: 'Building Constructors',
                traditional: {
                    summary: 'Be virtuous by developing good character traits (courage, temperance, wisdom, justice)',
                    keyIdeas: [
                        'Virtue (arete) as excellence of character',
                        'Golden mean between extremes',
                        'Habituation through practice',
                        'Eudaimonia as ultimate goal',
                        'Phronesis (practical wisdom) guides action'
                    ]
                },
                metaConstructor: {
                    summary: 'Aristotle was teaching constructor-level ethical design',
                    mappings: [
                        { concept: 'Virtue (arete)', mc: 'Reliable capability for good action that persists across contexts' },
                        { concept: 'Character (ethos)', mc: 'Stable constructor-level patterns' },
                        { concept: 'Habituation', mc: 'Building constructors through repeated practice until automatic' },
                        { concept: 'Phronesis', mc: 'Meta-constructor capacity‚Äîability to examine, deliberate, and choose well' },
                        { concept: 'Eudaimonia', mc: 'Life with sufficient meta-constructor capacity to pursue meaningful goals' }
                    ],
                    strengths: [
                        'Focuses on building persistent patterns (constructors), not just rules',
                        'Recognizes ethical behavior requires developed capabilities',
                        'Emphasizes practice and habituation',
                        'Makes phronesis (meta-constructor capacity) central'
                    ],
                    limitations: [
                        'Assumes relatively stable social context',
                        'Requires time and resources for character development',
                        'Can become rigid if virtues aren\'t revisable'
                    ],
                    modernInsight: 'Aristotle was right that ethics requires building stable patterns, but didn\'t fully understand how context shapes whether those patterns can form (Sapolsky), how biologically plastic we are (Levin), or that virtues themselves might need revision (Graeber & Wengrow).'
                },
                contexts: {
                    worksWell: [
                        'Stable contexts with time and resources',
                        'When you can develop long-term patterns',
                        'Professional development',
                        'Character education'
                    ],
                    worksPoolyIn: [
                        'Rapidly changing contexts',
                        'Resource-scarce situations',
                        'Systematically unjust contexts',
                        'Crises requiring immediate response'
                    ]
                },
                level: 'capability'
            },
            confucius: {
                id: 'confucius',
                name: 'Confucius',
                tradition: 'Confucian Ethics',
                period: '551-479 BCE',
                icon: '‚òØÔ∏è',
                color: 'green',
                tagline: 'Temporal Coherence and Relational Cultivation',
                traditional: {
                    summary: 'Follow ritual propriety (li), cultivate humaneness (ren), maintain proper relationships',
                    keyIdeas: [
                        'Li (ritual propriety) structures social life',
                        'Ren (humaneness) as fundamental virtue',
                        'Xiao (filial piety) grounds relationships',
                        'Junzi (exemplary person) as ideal',
                        'Continuous self-cultivation'
                    ]
                },
                metaConstructor: {
                    summary: 'Confucius was teaching temporal coherence maintenance across social scales',
                    mappings: [
                        { concept: 'Li (ritual)', mc: 'Social coherence patterns that coordinate action' },
                        { concept: 'Ren (humaneness)', mc: 'Capacity for recognizing others as agents and coordinating' },
                        { concept: 'Xiao (filial piety)', mc: 'Maintaining intergenerational temporal coherence' },
                        { concept: 'Junzi', mc: 'Someone with highly developed meta-constructor capacity' },
                        { concept: 'Self-cultivation', mc: 'Explicit meta-constructor practice' }
                    ],
                    strengths: [
                        'Recognizes ethics is about coordination, not just individual virtue',
                        'Emphasizes continuous self-examination and improvement',
                        'Sees individual and social as inseparable',
                        'Uses ritual as coherence-maintaining technology'
                    ],
                    limitations: [
                        'Can become oppressive if hierarchies are rigid',
                        'Rituals can ossify and prevent adaptation',
                        'Can suppress individual meta-constructor capacity if obedience overemphasized'
                    ],
                    modernInsight: 'Confucian insights are valuable for understanding how rituals maintain temporal coherence (daily/weekly/yearly patterns), how relationships shape identity and capability, and why continuous self-cultivation is essential.'
                },
                contexts: {
                    worksWell: [
                        'Stable communities with shared traditions',
                        'Contexts valuing long-term relationships',
                        'Organizational culture building',
                        'Family and intergenerational coordination'
                    ],
                    worksPoolyIn: [
                        'Highly individualistic contexts',
                        'Rapid social change',
                        'When hierarchies become oppressive',
                        'Cross-cultural contexts with different rituals'
                    ]
                },
                level: 'constructor'
            },
            kant: {
                id: 'kant',
                name: 'Immanuel Kant',
                tradition: 'Deontology',
                period: '1724-1804',
                icon: '‚öñÔ∏è',
                color: 'purple',
                tagline: 'Universal Meta-Constructor Capacity',
                traditional: {
                    summary: 'Act only on maxims you can will as universal laws; treat persons as ends, not merely means',
                    keyIdeas: [
                        'Categorical imperative as supreme principle',
                        'Autonomy as self-legislation',
                        'Dignity of rational beings',
                        'Duty over inclination',
                        'Kingdom of ends as ideal'
                    ]
                },
                metaConstructor: {
                    summary: 'Kant was identifying the logical structure of meta-constructor capacity applied to ethics',
                    mappings: [
                        { concept: 'Autonomy', mc: 'Self-legislation = meta-constructor capacity' },
                        { concept: 'Categorical imperative', mc: 'Test for whether maxim respects meta-constructor capacity universally' },
                        { concept: 'Kingdom of ends', mc: 'Community of meta-constructors coordinating' },
                        { concept: 'Dignity', mc: 'Recognition that persons have meta-constructor capacity' },
                        { concept: 'Treating as ends', mc: 'Respecting their meta-constructor capacity' }
                    ],
                    strengths: [
                        'Recognizes ethics requires capacity (reason/autonomy)',
                        'Provides logical tests for ethical principles',
                        'Respects persons as agents, not just patients',
                        'Universal scope‚Äîapplies to all rational beings'
                    ],
                    limitations: [
                        'Assumes everyone has equal meta-constructor capacity',
                        'Too abstract‚Äîdoesn\'t give guidance for building capacity',
                        'Doesn\'t address contexts that systematically degrade capacity',
                        'Overly individualistic‚Äîdoesn\'t recognize distributed agency'
                    ],
                    modernInsight: 'Kant was right that ethics requires meta-constructor capacity and that we should respect this in all persons. But he didn\'t understand how much capacity varies with context (Sapolsky), that capacity is distributed (Levin, Graeber & Wengrow), or that we have obligations to enhance capacity, not just respect it.'
                },
                contexts: {
                    worksWell: [
                        'When people have roughly equal capacity',
                        'Clear principles can guide action',
                        'Logical consistency matters',
                        'Rights protection is primary concern'
                    ],
                    worksPoolyIn: [
                        'Capacity dramatically unequal due to context',
                        'Principles conflict',
                        'Situations require flexibility',
                        'Immediate practical action needed'
                    ]
                },
                level: 'meta-constructor'
            },
            mill: {
                id: 'mill',
                name: 'John Stuart Mill',
                tradition: 'Utilitarianism',
                period: '1806-1873',
                icon: '‚öñÔ∏è',
                color: 'yellow',
                tagline: 'Consequences and Capacity',
                traditional: {
                    summary: 'Maximize happiness/utility; the right act is the one with the best consequences',
                    keyIdeas: [
                        'Greatest happiness principle',
                        'Utility as pleasure and absence of pain',
                        'Higher vs. lower pleasures',
                        'Harm principle (liberty)',
                        'Social reform orientation'
                    ]
                },
                metaConstructor: {
                    summary: 'Utilitarianism was trying to operationalize meta-constructor capacity at the social level',
                    mappings: [
                        { concept: 'Utility', mc: 'Not just pleasure, but capability for flourishing' },
                        { concept: 'Higher pleasures', mc: 'Require developed meta-constructor capacity' },
                        { concept: 'Greatest happiness', mc: 'Maximize collective meta-constructor capacity and its fruits' },
                        { concept: 'Harm principle', mc: 'Don\'t degrade others\' capacity' },
                        { concept: 'Social reform', mc: 'Recognizing contexts need to change, not just individuals' }
                    ],
                    strengths: [
                        'Recognizes context matters (social reform necessary)',
                        'Focuses on outcomes, not just intentions or rules',
                        'Provides common metric for evaluation',
                        'Emphasizes empirical investigation'
                    ],
                    limitations: [
                        'Hard to calculate consequences',
                        'Can justify degrading individual capacity for collective benefit',
                        'Doesn\'t adequately protect individual meta-constructor capacity',
                        'Can become technocratic'
                    ],
                    modernInsight: 'Utilitarians were right that we should care about outcomes and that context matters. But we need to measure meta-constructor capacity, not just happiness; we can\'t sacrifice individual capacity for aggregate calculations; and the act of calculating itself requires capacity that needs enhancing first.'
                },
                contexts: {
                    worksWell: [
                        'Policy design and evaluation',
                        'Resource allocation decisions',
                        'Public health interventions',
                        'Situations requiring empirical testing'
                    ],
                    worksPoolyIn: [
                        'When calculations become technocratic',
                        'Individual rights at stake',
                        'Uncertain or distant consequences',
                        'Situations requiring immediate action'
                    ]
                },
                level: 'capacity'
            },
            rawls: {
                id: 'rawls',
                name: 'John Rawls',
                tradition: 'Social Contract',
                period: '1921-2002',
                icon: 'ü§ù',
                color: 'red',
                tagline: 'Capability-Based Coordination',
                traditional: {
                    summary: 'Justice as fairness: design institutions from behind a veil of ignorance',
                    keyIdeas: [
                        'Original position thought experiment',
                        'Veil of ignorance',
                        'Equal basic liberties principle',
                        'Difference principle (benefit worst-off)',
                        'Primary goods as prerequisites'
                    ]
                },
                metaConstructor: {
                    summary: 'Rawls argued for protection of meta-constructor capacity as the foundation of justice',
                    mappings: [
                        { concept: 'Original position', mc: 'Thought experiment using meta-constructor capacity' },
                        { concept: 'Veil of ignorance', mc: 'Forces consideration of all perspectives (requires high capacity)' },
                        { concept: 'Equal liberties', mc: 'Protect meta-constructor capacity for all' },
                        { concept: 'Difference principle', mc: 'Protect capacity of most vulnerable' },
                        { concept: 'Primary goods', mc: 'Preconditions for meta-constructor capacity' }
                    ],
                    strengths: [
                        'Recognizes preconditions for capacity (liberties, opportunities, resources)',
                        'Prioritizes protection of most vulnerable',
                        'Provides framework for institutional evaluation',
                        'Connects to Graeber & Wengrow\'s three freedoms'
                    ],
                    limitations: [
                        'Original position may be too idealized',
                        'Difference principle can be difficult to apply',
                        'Assumes stable background institutions',
                        'May not adequately address power dynamics'
                    ],
                    modernInsight: 'Rawls was closest to the answer: Design institutions that protect and enhance meta-constructor capacity for all, especially the most vulnerable. His "primary goods" can be reinterpreted as capacity prerequisites: liberties (freedom to move/disobey/reconfigure), opportunities (access to development), resources (material basis), self-respect (recognition as agent).'
                },
                contexts: {
                    worksWell: [
                        'Institutional design and evaluation',
                        'Policy analysis',
                        'Thinking about distributive justice',
                        'Protecting basic capabilities'
                    ],
                    worksPoolyIn: [
                        'Non-ideal theory (existing injustice)',
                        'Cross-cultural contexts',
                        'Rapid change requiring flexibility',
                        'When immediate action needed'
                    ]
                },
                level: 'meta-constructor'
            },
            gilligan: {
                id: 'gilligan',
                name: 'Carol Gilligan',
                tradition: 'Care Ethics',
                period: '1936-present',
                icon: 'üíù',
                color: 'pink',
                tagline: 'Relational Coherence and Context-Sensitivity',
                traditional: {
                    summary: 'Ethics is about relationships, care, and responsiveness, not just abstract rules',
                    keyIdeas: [
                        'Ethics of care vs. ethics of justice',
                        'Relational self',
                        'Context and particularity matter',
                        'Emotional attunement',
                        'Responsibility and connection'
                    ]
                },
                metaConstructor: {
                    summary: 'Care ethics identified relational and context-dependent aspects of meta-constructor capacity',
                    mappings: [
                        { concept: 'Care', mc: 'Actively supporting others\' meta-constructor capacity' },
                        { concept: 'Relational self', mc: 'Recognizing capacity is constituted through relationships' },
                        { concept: 'Context-sensitivity', mc: 'Recognizing abstract rules ignore how context shapes capacity' },
                        { concept: 'Emotional attunement', mc: 'Necessary capability for recognizing others\' needs' },
                        { concept: 'Responsibility', mc: 'Obligation to maintain supportive relationships' }
                    ],
                    strengths: [
                        'Challenges autonomous individual assumption',
                        'Emphasizes relational maintenance requires work',
                        'Shows context and particularity matter',
                        'Recognizes emotional capabilities as essential'
                    ],
                    limitations: [
                        'Can be used to justify unequal care burdens',
                        'May not provide guidance for justice at scale',
                        'Risk of romanticizing care relationships',
                        'Needs integration with structural justice'
                    ],
                    modernInsight: 'Care ethicists were right that we\'re constituted by relationships (distributed agency), supporting others\' capacity is essential ethical work, context matters, and emotional capabilities are essential. This isn\'t opposed to justice‚Äîit\'s complementary. Justice protects capacity structurally; care supports it relationally.'
                },
                contexts: {
                    worksWell: [
                        'Interpersonal relationships',
                        'Caregiving contexts (healthcare, education, parenting)',
                        'Recognizing invisible emotional labor',
                        'Understanding support networks'
                    ],
                    worksPoolyIn: [
                        'Large-scale institutional design',
                        'When care relationships are exploitative',
                        'Situations requiring impersonal justice',
                        'Resource allocation at scale'
                    ]
                },
                level: 'capacity'
            },
            sartre: {
                id: 'sartre',
                name: 'Jean-Paul Sartre',
                tradition: 'Existentialism',
                period: '1905-1980',
                icon: 'üé≠',
                color: 'gray',
                tagline: 'Radical Meta-Constructor Capacity',
                traditional: {
                    summary: 'Existence precedes essence; you must create yourself through authentic choice',
                    keyIdeas: [
                        'Existence precedes essence',
                        'Radical freedom',
                        'Authenticity vs. bad faith',
                        'Responsibility for self-creation',
                        'Confronting absurdity'
                    ]
                },
                metaConstructor: {
                    summary: 'Existentialists explored the phenomenology of meta-constructor capacity and its challenges',
                    mappings: [
                        { concept: 'Existence precedes essence', mc: 'You don\'t have fixed nature; you\'re a meta-constructor' },
                        { concept: 'Radical freedom', mc: 'Meta-constructor capacity with no predetermined constraints (overstated)' },
                        { concept: 'Authenticity', mc: 'Using meta-constructor capacity to create coherent life' },
                        { concept: 'Bad faith', mc: 'Denying your meta-constructor capacity' },
                        { concept: 'Absurdity', mc: 'Recognition that you must construct meaning' }
                    ],
                    strengths: [
                        'Emphasizes active use of meta-constructor capacity',
                        'Recognizes burden/anxiety of capacity',
                        'Challenges excuses that deny agency',
                        'Focuses on authenticity and self-examination'
                    ],
                    limitations: [
                        'Overestimates freedom (didn\'t understand biological/social constraints)',
                        'Underestimates how context shapes capacity',
                        'Too individualistic',
                        'Can be paralyzing rather than empowering'
                    ],
                    modernInsight: 'Existentialists were right that you must actively use your meta-constructor capacity and that authenticity requires examining patterns. But they were wrong about radical freedom (you\'re highly context-dependent), constructing yourself alone (it\'s distributed and relational), and treating biology/society as excuses (they\'re real constraints).'
                },
                contexts: {
                    worksWell: [
                        'Personal identity questions',
                        'Life transitions requiring choice',
                        'Confronting meaninglessness',
                        'Individual authenticity development'
                    ],
                    worksPoolyIn: [
                        'Contexts of severe constraint',
                        'When capacity is degraded by context',
                        'Collective action and coordination',
                        'When social support is primary need'
                    ]
                },
                level: 'meta-constructor'
            },
            dewey: {
                id: 'dewey',
                name: 'John Dewey',
                tradition: 'Pragmatism',
                period: '1859-1952',
                icon: 'üîß',
                color: 'orange',
                tagline: 'Learning and Revision',
                traditional: {
                    summary: 'Truth is what works; test ideas by their consequences; democracy as collective inquiry',
                    keyIdeas: [
                        'Learning from experience',
                        'Democratic experimentalism',
                        'Instrumentalism (ideas as tools)',
                        'Continuous growth',
                        'Integration of theory and practice'
                    ]
                },
                metaConstructor: {
                    summary: 'Pragmatists described meta-constructor capacity in action',
                    mappings: [
                        { concept: 'Learning from experience', mc: 'Core meta-constructor activity' },
                        { concept: 'Democratic experimentalism', mc: 'Collective meta-constructor capacity' },
                        { concept: 'Instrumentalism', mc: 'Meta-constructor stance toward ideas themselves' },
                        { concept: 'Growth', mc: 'Continuous enhancement of capacity' },
                        { concept: 'Reflection', mc: 'Examining patterns to improve' }
                    ],
                    strengths: [
                        'Emphasizes learning and revision',
                        'Recognizes collective inquiry',
                        'Tests ideas by practical outcomes',
                        'Integrates theory and practice seamlessly'
                    ],
                    limitations: [
                        'May lack clear normative grounding',
                        'Can be too relativistic',
                        'Requires time for experimentation',
                        'May not provide guidance in novel situations'
                    ],
                    modernInsight: 'Dewey\'s educational philosophy was explicitly about building meta-constructor capacity: learning by doing, reflection on experience, democratic participation, and continuous growth. This IS the approach we\'re taking: ethics isn\'t fixed truths to memorize but capabilities to develop through practice, tested by whether they enhance capacity and coordination.'
                },
                contexts: {
                    worksWell: [
                        'Educational contexts',
                        'Organizational learning',
                        'Democratic participation',
                        'Continuous improvement processes'
                    ],
                    worksPoolyIn: [
                        'When immediate principles needed',
                        'Contexts requiring stability',
                        'When experimentation is risky',
                        'Situations demanding quick decisions'
                    ]
                },
                level: 'meta-constructor'
            },
            buddha: {
                id: 'buddha',
                name: 'Buddha',
                tradition: 'Buddhism',
                period: 'c. 563-483 BCE',
                icon: 'üßò',
                color: 'indigo',
                tagline: 'Examining and Modifying Mental Patterns',
                traditional: {
                    summary: 'Suffering comes from attachment; achieve liberation through meditation and ethical conduct',
                    keyIdeas: [
                        'Four Noble Truths',
                        'Noble Eightfold Path',
                        'Mindfulness and meditation',
                        'Non-attachment',
                        'Liberation from suffering'
                    ]
                },
                metaConstructor: {
                    summary: 'Buddhism is systematic training in meta-constructor capacity applied to mental states',
                    mappings: [
                        { concept: 'Mindfulness', mc: 'Awareness of your own processes (meta-level observation)' },
                        { concept: 'Meditation', mc: 'Practice examining and not identifying with mental patterns' },
                        { concept: 'Non-attachment', mc: 'Not letting patterns rigidify (flexibility for revision)' },
                        { concept: 'Noble Eightfold Path', mc: 'Integrated development of constructor-level ethical patterns' },
                        { concept: 'Liberation', mc: 'Maximal meta-constructor capacity (able to examine any pattern)' }
                    ],
                    strengths: [
                        'Recognizes experienced self is constructed',
                        'Provides practical methods for examining patterns',
                        'Emphasizes developing capacity, not just beliefs',
                        'Integrates ethical behavior, mental training, wisdom'
                    ],
                    limitations: [
                        'Can underemphasize structural/social factors',
                        'May be interpreted as quietistic',
                        'Requires significant time investment',
                        'Cultural translation challenges'
                    ],
                    modernInsight: 'Buddhist practices are valuable for developing meta-cognitive skills, emotional regulation (protecting capacity), reducing stress (protecting biological substrates), and examining automatic patterns. Modern neuroscience confirms meditation changes brain structure, enhances prefrontal cortex, and regulates amygdala.'
                },
                contexts: {
                    worksWell: [
                        'Personal mental training',
                        'Stress reduction',
                        'Developing metacognitive skills',
                        'Emotional regulation'
                    ],
                    worksPoolyIn: [
                        'Situations requiring collective action',
                        'When structural change is primary need',
                        'Immediate crises',
                        'Contexts where withdrawal isn\'t possible'
                    ]
                },
                level: 'meta-constructor'
            }
        };

        // Main App Component
        function App() {
            const [currentView, setCurrentView] = useState('overview');
            const [selectedTradition, setSelectedTradition] = useState(null);
            const [compareSet, setCompareSet] = useState([]);
            const [contextScenario, setContextScenario] = useState(null);
            const [completedSections, setCompletedSections] = useState(new Set());

            // Load saved progress
            useEffect(() => {
                const saved = localStorage.getItem('traditionsExplorerProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    setCompletedSections(new Set(data.completed));
                }
            }, []);

            // Save progress
            useEffect(() => {
                localStorage.setItem('traditionsExplorerProgress', JSON.stringify({
                    completed: Array.from(completedSections)
                }));
            }, [completedSections]);

            const markComplete = (section) => {
                setCompletedSections(prev => new Set([...prev, section]));
            };

            const views = [
                { id: 'overview', label: 'Overview', icon: 'üè†' },
                { id: 'explorer', label: 'Tradition Explorer', icon: 'üîç' },
                { id: 'timeline', label: 'Historical Timeline', icon: 'üìÖ' },
                { id: 'comparison', label: 'Compare Traditions', icon: '‚öñÔ∏è' },
                { id: 'context', label: 'Context Diagnostic', icon: 'üéØ' },
                { id: 'integration', label: 'Integration Map', icon: 'üß©' },
                { id: 'practice', label: 'Practice Scenarios', icon: 'üí°' }
            ];

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <header className="gradient-bg text-white shadow-lg">
                        <div className="max-w-7xl mx-auto px-4 py-6">
                            <h1 className="text-3xl font-bold mb-2">Historical Traditions Explorer</h1>
                            <p className="text-lg opacity-90">Understanding Ethics Through the Meta-Constructor Lens</p>
                        </div>
                    </header>

                    {/* Navigation */}
                    <nav className="bg-white shadow-sm sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4">
                            <div className="flex overflow-x-auto py-4 space-x-2">
                                {views.map(view => (
                                    <button
                                        key={view.id}
                                        onClick={() => setCurrentView(view.id)}
                                        className={`flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-all tab-button ${
                                            currentView === view.id ? 'active' : 'hover:bg-gray-100'
                                        }`}
                                    >
                                        <span className="text-xl">{view.icon}</span>
                                        <span>{view.label}</span>
                                        {completedSections.has(view.id) && (
                                            <span className="text-green-500">‚úì</span>
                                        )}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </nav>

                    {/* Content */}
                    <main className="max-w-7xl mx-auto px-4 py-8">
                        <div className="fade-in">
                            {currentView === 'overview' && (
                                <OverviewSection onComplete={() => markComplete('overview')} />
                            )}
                            {currentView === 'explorer' && (
                                <ExplorerSection 
                                    traditions={TRADITIONS}
                                    selectedTradition={selectedTradition}
                                    setSelectedTradition={setSelectedTradition}
                                    onComplete={() => markComplete('explorer')}
                                />
                            )}
                            {currentView === 'timeline' && (
                                <TimelineSection 
                                    traditions={TRADITIONS}
                                    onComplete={() => markComplete('timeline')}
                                />
                            )}
                            {currentView === 'comparison' && (
                                <ComparisonSection 
                                    traditions={TRADITIONS}
                                    compareSet={compareSet}
                                    setCompareSet={setCompareSet}
                                    onComplete={() => markComplete('comparison')}
                                />
                            )}
                            {currentView === 'context' && (
                                <ContextDiagnosticSection 
                                    traditions={TRADITIONS}
                                    onComplete={() => markComplete('context')}
                                />
                            )}
                            {currentView === 'integration' && (
                                <IntegrationSection 
                                    traditions={TRADITIONS}
                                    onComplete={() => markComplete('integration')}
                                />
                            )}
                            {currentView === 'practice' && (
                                <PracticeSection 
                                    traditions={TRADITIONS}
                                    onComplete={() => markComplete('practice')}
                                />
                            )}
                        </div>
                    </main>

                    {/* Footer */}
                    <footer className="bg-gray-800 text-white mt-16 py-8">
                        <div className="max-w-7xl mx-auto px-4 text-center">
                            <p className="text-lg font-semibold mb-2">Ethics Through the Meta-Constructor Lens</p>
                            <p className="text-sm opacity-80">Module 1B: Historical Traditions</p>
                        </div>
                    </footer>
                </div>
            );
        }

        // Overview Section
        function OverviewSection({ onComplete }) {
            useEffect(() => {
                onComplete();
            }, []);

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">The Core Insight</h2>
                        <div className="prose prose-lg max-w-none">
                            <p className="text-xl text-gray-700 leading-relaxed mb-6">
                                <strong>The entire history of ethics can be reinterpreted as different attempts to 
                                understand, protect, and enhance meta-constructor capacity</strong>‚Äîthe ability to 
                                examine and modify your own functioning while maintaining coherence.
                            </p>

                            <div className="bg-purple-50 border-l-4 border-purple-500 p-6 my-6">
                                <h3 className="text-xl font-semibold text-purple-900 mb-2">The Unifying Framework</h3>
                                <p className="text-gray-700 mb-3">
                                    Different traditions emphasized different aspects, developed in different contexts, 
                                    and worked better or worse depending on circumstances. The meta-constructor framework provides:
                                </p>
                                <ul className="list-disc list-inside space-y-2 text-gray-700">
                                    <li>Explains what each tradition was trying to achieve</li>
                                    <li>Shows why each works in some contexts but not others</li>
                                    <li>Integrates insights across traditions</li>
                                    <li>Grounds everything in empirical evidence</li>
                                </ul>
                            </div>

                            <h3 className="text-2xl font-semibold text-gray-900 mt-8 mb-4">What You'll Explore</h3>
                            <div className="grid md:grid-cols-2 gap-4">
                                <div className="bg-blue-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-blue-900 mb-2">üîç Tradition Explorer</h4>
                                    <p className="text-sm text-gray-700">
                                        Deep dive into each major ethical tradition with both traditional 
                                        and meta-constructor interpretations
                                    </p>
                                </div>
                                <div className="bg-green-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-green-900 mb-2">üìÖ Historical Timeline</h4>
                                    <p className="text-sm text-gray-700">
                                        See how ethical thinking evolved across cultures and centuries
                                    </p>
                                </div>
                                <div className="bg-yellow-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-yellow-900 mb-2">‚öñÔ∏è Comparison Tool</h4>
                                    <p className="text-sm text-gray-700">
                                        Compare multiple traditions side-by-side to see patterns and differences
                                    </p>
                                </div>
                                <div className="bg-purple-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-purple-900 mb-2">üéØ Context Diagnostic</h4>
                                    <p className="text-sm text-gray-700">
                                        Learn which ethical approach works best in different situations
                                    </p>
                                </div>
                                <div className="bg-pink-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-pink-900 mb-2">üß© Integration Map</h4>
                                    <p className="text-sm text-gray-700">
                                        Visualize how traditions address different aspects of meta-constructor capacity
                                    </p>
                                </div>
                                <div className="bg-orange-50 p-4 rounded-lg">
                                    <h4 className="font-semibold text-orange-900 mb-2">üí° Practice Scenarios</h4>
                                    <p className="text-sm text-gray-700">
                                        Apply different traditions to real ethical dilemmas
                                    </p>
                                </div>
                            </div>

                            <div className="bg-gray-100 p-6 rounded-lg mt-8">
                                <h3 className="text-xl font-semibold text-gray-900 mb-3">The Key Shift</h3>
                                <p className="text-gray-700 mb-4">
                                    <strong>Traditional approach:</strong> "Which ethical theory is TRUE? Choose one and defend it."
                                </p>
                                <p className="text-gray-700">
                                    <strong>Meta-constructor approach:</strong> "Which approach enhances meta-constructor 
                                    capacity in which contexts? Integrate insights from all."
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Explorer Section
        function ExplorerSection({ traditions, selectedTradition, setSelectedTradition, onComplete }) {
            const traditionList = Object.values(traditions);

            useEffect(() => {
                if (selectedTradition) {
                    onComplete();
                }
            }, [selectedTradition]);

            return (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Explore Ethical Traditions</h2>
                        <p className="text-lg text-gray-700 mb-6">
                            Click on any tradition to see both the traditional interpretation and the meta-constructor reinterpretation.
                        </p>

                        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {traditionList.map(trad => (
                                <div
                                    key={trad.id}
                                    onClick={() => setSelectedTradition(
                                        selectedTradition?.id === trad.id ? null : trad
                                    )}
                                    className={`tradition-card bg-white border-2 rounded-lg p-6 ${
                                        selectedTradition?.id === trad.id 
                                            ? `border-${trad.color}-500 expanded` 
                                            : 'border-gray-200'
                                    }`}
                                >
                                    <div className="flex items-start justify-between mb-3">
                                        <span className="text-5xl">{trad.icon}</span>
                                        <span className={`px-3 py-1 bg-${trad.color}-100 text-${trad.color}-800 text-xs rounded-full`}>
                                            {trad.period}
                                        </span>
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-900 mb-1">{trad.name}</h3>
                                    <p className="text-sm text-gray-600 mb-2">{trad.tradition}</p>
                                    <p className="text-purple-600 font-medium italic text-sm">{trad.tagline}</p>
                                </div>
                            ))}
                        </div>

                        {selectedTradition && (
                            <div className="mt-8 bg-gray-50 rounded-lg p-8">
                                <button
                                    onClick={() => setSelectedTradition(null)}
                                    className="mb-6 text-purple-600 hover:text-purple-700 flex items-center"
                                >
                                    ‚Üê Back to all traditions
                                </button>

                                <div className="flex items-center space-x-4 mb-6">
                                    <span className="text-6xl">{selectedTradition.icon}</span>
                                    <div>
                                        <h3 className="text-3xl font-bold text-gray-900">{selectedTradition.name}</h3>
                                        <p className="text-lg text-gray-600">{selectedTradition.tradition}</p>
                                        <p className="text-sm text-gray-500">{selectedTradition.period}</p>
                                    </div>
                                </div>

                                <div className="grid md:grid-cols-2 gap-8">
                                    {/* Traditional Interpretation */}
                                    <div className="bg-white rounded-lg p-6 border-2 border-blue-200">
                                        <h4 className="text-xl font-bold text-blue-900 mb-4">Traditional Interpretation</h4>
                                        <p className="text-gray-700 mb-4 font-medium">{selectedTradition.traditional.summary}</p>
                                        <h5 className="font-semibold text-gray-900 mb-2">Key Ideas:</h5>
                                        <ul className="space-y-2">
                                            {selectedTradition.traditional.keyIdeas.map((idea, i) => (
                                                <li key={i} className="flex items-start">
                                                    <span className="text-blue-500 mr-2">‚Ä¢</span>
                                                    <span className="text-gray-700">{idea}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </div>

                                    {/* Meta-Constructor Interpretation */}
                                    <div className="bg-white rounded-lg p-6 border-2 border-purple-200">
                                        <h4 className="text-xl font-bold text-purple-900 mb-4">Meta-Constructor Reinterpretation</h4>
                                        <p className="text-gray-700 mb-4 font-medium">{selectedTradition.metaConstructor.summary}</p>
                                        <h5 className="font-semibold text-gray-900 mb-2">Concept Mappings:</h5>
                                        <div className="space-y-3">
                                            {selectedTradition.metaConstructor.mappings.map((mapping, i) => (
                                                <div key={i} className="bg-purple-50 p-3 rounded">
                                                    <p className="font-semibold text-purple-900 text-sm">{mapping.concept}</p>
                                                    <p className="text-gray-700 text-sm">‚Üí {mapping.mc}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>

                                {/* Strengths and Limitations */}
                                <div className="grid md:grid-cols-2 gap-6 mt-6">
                                    <div className="bg-green-50 p-6 rounded-lg">
                                        <h5 className="font-semibold text-green-900 mb-3">‚úì Strengths</h5>
                                        <ul className="space-y-2">
                                            {selectedTradition.metaConstructor.strengths.map((strength, i) => (
                                                <li key={i} className="text-gray-700 text-sm">‚Ä¢ {strength}</li>
                                            ))}
                                        </ul>
                                    </div>
                                    <div className="bg-red-50 p-6 rounded-lg">
                                        <h5 className="font-semibold text-red-900 mb-3">‚ö† Limitations</h5>
                                        <ul className="space-y-2">
                                            {selectedTradition.metaConstructor.limitations.map((limitation, i) => (
                                                <li key={i} className="text-gray-700 text-sm">‚Ä¢ {limitation}</li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>

                                {/* Modern Insight */}
                                <div className="mt-6 bg-gradient-to-br from-purple-100 to-purple-50 p-6 rounded-lg border-2 border-purple-200">
                                    <h5 className="font-semibold text-purple-900 mb-2">üí° Modern Insight</h5>
                                    <p className="text-gray-700">{selectedTradition.metaConstructor.modernInsight}</p>
                                </div>

                                {/* When It Works */}
                                <div className="mt-6 grid md:grid-cols-2 gap-6">
                                    <div className="bg-blue-50 p-6 rounded-lg">
                                        <h5 className="font-semibold text-blue-900 mb-3">Works Well In:</h5>
                                        <ul className="space-y-2">
                                            {selectedTradition.contexts.worksWell.map((context, i) => (
                                                <li key={i} className="text-gray-700 text-sm">‚úì {context}</li>
                                            ))}
                                        </ul>
                                    </div>
                                    <div className="bg-orange-50 p-6 rounded-lg">
                                        <h5 className="font-semibold text-orange-900 mb-3">Works Poorly In:</h5>
                                        <ul className="space-y-2">
                                            {selectedTradition.contexts.worksPoolyIn.map((context, i) => (
                                                <li key={i} className="text-gray-700 text-sm">‚úó {context}</li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Timeline Section
        function TimelineSection({ traditions, onComplete }) {
            const traditionList = Object.values(traditions).sort((a, b) => {
                // Sort by period (rough chronological)
                const periodA = parseInt(a.period.match(/-?\d+/)?.[0] || '0');
                const periodB = parseInt(b.period.match(/-?\d+/)?.[0] || '0');
                return periodA - periodB;
            });

            useEffect(() => {
                onComplete();
            }, []);

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Historical Timeline</h2>
                        <p className="text-lg text-gray-700 mb-8">
                            See how ethical thinking evolved across cultures and millennia, each tradition 
                            grappling with different aspects of meta-constructor capacity.
                        </p>

                        <div className="space-y-8">
                            {traditionList.map((trad, index) => (
                                <div key={trad.id} className="timeline-item relative pl-16">
                                    {index < traditionList.length - 1 && <div className="timeline-line"></div>}
                                    
                                    <div className="absolute left-0 top-0">
                                        <div className={`w-12 h-12 bg-${trad.color}-100 rounded-full flex items-center justify-center border-4 border-white shadow-lg`}>
                                            <span className="text-2xl">{trad.icon}</span>
                                        </div>
                                    </div>

                                    <div className="bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow">
                                        <div className="flex justify-between items-start mb-3">
                                            <div>
                                                <h3 className="text-2xl font-bold text-gray-900">{trad.name}</h3>
                                                <p className="text-gray-600">{trad.tradition}</p>
                                            </div>
                                            <span className={`px-3 py-1 bg-${trad.color}-100 text-${trad.color}-800 text-sm rounded-full font-medium`}>
                                                {trad.period}
                                            </span>
                                        </div>
                                        
                                        <div className="bg-purple-100 border-l-4 border-purple-500 p-4 mb-4">
                                            <p className="text-purple-900 font-medium">{trad.tagline}</p>
                                        </div>

                                        <p className="text-gray-700 mb-3">{trad.metaConstructor.summary}</p>

                                        <div className="flex items-center space-x-2 text-sm">
                                            <span className={`px-2 py-1 bg-gray-200 text-gray-700 rounded`}>
                                                Focus: {trad.level}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="mt-12 bg-gradient-to-br from-purple-100 to-purple-50 p-8 rounded-lg">
                            <h3 className="text-2xl font-bold text-purple-900 mb-4">The Pattern</h3>
                            <p className="text-gray-700 mb-4">
                                Across 2,500 years of ethical thinking, different traditions emphasized different aspects:
                            </p>
                            <ul className="space-y-2 text-gray-700">
                                <li>‚Ä¢ <strong>Ancient ethics</strong> focused on building stable patterns (constructors)</li>
                                <li>‚Ä¢ <strong>Enlightenment ethics</strong> emphasized universal principles and autonomy (meta-constructor capacity)</li>
                                <li>‚Ä¢ <strong>Modern ethics</strong> recognized context, relationships, and consequences</li>
                                <li>‚Ä¢ <strong>Contemporary ethics</strong> integrates these insights with empirical evidence</li>
                            </ul>
                            <p className="text-gray-700 mt-4">
                                The meta-constructor framework shows how all these traditions were wrestling with 
                                the same fundamental challenge: <strong>How do we develop and maintain the capacity 
                                to live well and coordinate ethically?</strong>
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        // Comparison Section
        function ComparisonSection({ traditions, compareSet, setCompareSet, onComplete }) {
            const traditionList = Object.values(traditions);
            const categories = [
                'Traditional Summary',
                'Meta-Constructor Interpretation',
                'Primary Focus (Level)',
                'Key Strength',
                'Main Limitation',
                'Works Best In'
            ];

            const toggleTradition = (trad) => {
                if (compareSet.find(t => t.id === trad.id)) {
                    setCompareSet(compareSet.filter(t => t.id !== trad.id));
                } else if (compareSet.length < 3) {
                    setCompareSet([...compareSet, trad]);
                }
            };

            useEffect(() => {
                if (compareSet.length >= 2) {
                    onComplete();
                }
            }, [compareSet]);

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Compare Traditions</h2>
                        <p className="text-lg text-gray-700 mb-6">
                            Select 2-3 traditions to compare side-by-side. See how different approaches 
                            address different aspects of meta-constructor capacity.
                        </p>

                        {/* Selection */}
                        <div className="mb-8">
                            <h3 className="text-xl font-semibold text-gray-900 mb-4">
                                Select Traditions (up to 3):
                            </h3>
                            <div className="flex flex-wrap gap-3">
                                {traditionList.map(trad => (
                                    <button
                                        key={trad.id}
                                        onClick={() => toggleTradition(trad)}
                                        disabled={compareSet.length >= 3 && !compareSet.find(t => t.id === trad.id)}
                                        className={`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-all ${
                                            compareSet.find(t => t.id === trad.id)
                                                ? `border-${trad.color}-500 bg-${trad.color}-50`
                                                : 'border-gray-300 hover:border-gray-400'
                                        } ${compareSet.length >= 3 && !compareSet.find(t => t.id === trad.id) ? 'opacity-50 cursor-not-allowed' : ''}`}
                                    >
                                        <span className="text-2xl">{trad.icon}</span>
                                        <span className="font-medium">{trad.name}</span>
                                        {compareSet.find(t => t.id === trad.id) && (
                                            <span className="text-green-500">‚úì</span>
                                        )}
                                    </button>
                                ))}
                            </div>
                        </div>

                        {/* Comparison Table */}
                        {compareSet.length >= 2 && (
                            <div className="overflow-x-auto">
                                <table className="w-full border-collapse">
                                    <thead>
                                        <tr className="bg-gray-100">
                                            <th className="p-4 text-left border font-semibold text-gray-900 sticky left-0 bg-gray-100">
                                                Category
                                            </th>
                                            {compareSet.map(trad => (
                                                <th key={trad.id} className={`p-4 text-left border bg-${trad.color}-50`}>
                                                    <div className="flex items-center space-x-2">
                                                        <span className="text-3xl">{trad.icon}</span>
                                                        <div>
                                                            <p className="font-bold text-gray-900">{trad.name}</p>
                                                            <p className="text-sm text-gray-600">{trad.tradition}</p>
                                                        </div>
                                                    </div>
                                                </th>
                                            ))}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {/* Traditional Summary */}
                                        <tr>
                                            <td className="p-4 border font-semibold bg-gray-50 sticky left-0">
                                                Traditional Summary
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <p className="text-sm text-gray-700">{trad.traditional.summary}</p>
                                                </td>
                                            ))}
                                        </tr>

                                        {/* Meta-Constructor Interpretation */}
                                        <tr className="bg-gray-50">
                                            <td className="p-4 border font-semibold sticky left-0 bg-gray-50">
                                                Meta-Constructor Interpretation
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <p className="text-sm text-gray-700">{trad.metaConstructor.summary}</p>
                                                </td>
                                            ))}
                                        </tr>

                                        {/* Primary Focus */}
                                        <tr>
                                            <td className="p-4 border font-semibold bg-gray-50 sticky left-0">
                                                Primary Focus (Level)
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <span className="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium">
                                                        {trad.level}
                                                    </span>
                                                </td>
                                            ))}
                                        </tr>

                                        {/* Key Strength */}
                                        <tr className="bg-gray-50">
                                            <td className="p-4 border font-semibold sticky left-0 bg-gray-50">
                                                Key Strength
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <p className="text-sm text-gray-700">{trad.metaConstructor.strengths[0]}</p>
                                                </td>
                                            ))}
                                        </tr>

                                        {/* Main Limitation */}
                                        <tr>
                                            <td className="p-4 border font-semibold bg-gray-50 sticky left-0">
                                                Main Limitation
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <p className="text-sm text-gray-700">{trad.metaConstructor.limitations[0]}</p>
                                                </td>
                                            ))}
                                        </tr>

                                        {/* Works Best In */}
                                        <tr className="bg-gray-50">
                                            <td className="p-4 border font-semibold sticky left-0 bg-gray-50">
                                                Works Best In
                                            </td>
                                            {compareSet.map(trad => (
                                                <td key={trad.id} className="p-4 border comparison-cell">
                                                    <ul className="text-sm text-gray-700 space-y-1">
                                                        {trad.contexts.worksWell.slice(0, 2).map((context, i) => (
                                                            <li key={i}>‚Ä¢ {context}</li>
                                                        ))}
                                                    </ul>
                                                </td>
                                            ))}
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        )}

                        {compareSet.length < 2 && (
                            <div className="text-center py-12 text-gray-500">
                                Select at least 2 traditions to see comparison
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Context Diagnostic Section  
        function ContextDiagnosticSection({ traditions, onComplete }) {
            const [scenario, setScenario] = useState(null);
            const [recommendations, setRecommendations] = useState([]);

            const scenarios = [
                {
                    id: 1,
                    title: 'Personal Character Development',
                    description: 'You have stable circumstances, time, and resources. You want to develop yourself as an ethical person over the long term.',
                    context: {
                        stability: 'high',
                        resources: 'high',
                        timescale: 'long',
                        scope: 'individual'
                    },
                    recommended: ['aristotle', 'confucius', 'buddha'],
                    explanation: 'Stable contexts with time and resources are ideal for building constructor-level patterns through habituation (Aristotle), continuous cultivation (Confucius), and systematic mental training (Buddha).'
                },
                {
                    id: 2,
                    title: 'Institutional Reform',
                    description: 'You\'re working to change organizational policies and structures to be more just and effective.',
                    context: {
                        stability: 'medium',
                        resources: 'medium',
                        timescale: 'medium',
                        scope: 'institutional'
                    },
                    recommended: ['rawls', 'mill', 'dewey'],
                    explanation: 'Institutional design requires frameworks for evaluating justice (Rawls), assessing outcomes empirically (Mill), and enabling collective learning and revision (Dewey).'
                },
                {
                    id: 3,
                    title: 'Crisis Response',
                    description: 'You\'re facing an immediate ethical dilemma requiring quick decision-making under pressure.',
                    context: {
                        stability: 'low',
                        resources: 'low',
                        timescale: 'immediate',
                        scope: 'individual'
                    },
                    recommended: ['kant', 'mill'],
                    explanation: 'Crises require clear principles (Kant\'s categorical imperative) and quick assessment of likely consequences (utilitarian calculation). Long-term character development approaches are less helpful in the moment.'
                },
                {
                    id: 4,
                    title: 'Caregiving Relationship',
                    description: 'You\'re caring for someone vulnerable (child, patient, elderly parent) and want to support their wellbeing and development.',
                    context: {
                        stability: 'medium',
                        resources: 'medium',
                        timescale: 'long',
                        scope: 'relational'
                    },
                    recommended: ['gilligan', 'confucius', 'aristotle'],
                    explanation: 'Caregiving contexts require relational attunement and context-sensitivity (care ethics), maintenance of supportive relationships (Confucius), and helping the other develop capabilities (Aristotle).'
                },
                {
                    id: 5,
                    title: 'Existential Life Transition',
                    description: 'You\'re questioning your values, identity, and life direction. Nothing feels given or certain.',
                    context: {
                        stability: 'low',
                        resources: 'medium',
                        timescale: 'medium',
                        scope: 'individual'
                    },
                    recommended: ['sartre', 'buddha', 'dewey'],
                    explanation: 'Major transitions require examining patterns and creating meaning (Sartre), observing mental patterns without attachment (Buddha), and experimental learning from experience (Dewey).'
                },
                {
                    id: 6,
                    title: 'Unjust Social Context',
                    description: 'You\'re operating in systematically oppressive conditions that degrade your capacity and agency.',
                    context: {
                        stability: 'low',
                        resources: 'low',
                        timescale: 'immediate',
                        scope: 'social'
                    },
                    recommended: ['rawls', 'mill', 'gilligan'],
                    explanation: 'Unjust contexts require structural analysis and reform (Rawls on justice), focus on outcomes that reduce suffering (Mill), and mutual support in relationships (care ethics). Individual character development is insufficient when context systematically degrades capacity.'
                }
            ];

            const selectScenario = (scen) => {
                setScenario(scen);
                const recs = scen.recommended.map(id => traditions[id]);
                setRecommendations(recs);
                onComplete();
            };

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Context Diagnostic</h2>
                        <p className="text-lg text-gray-700 mb-6">
                            Different ethical approaches work better in different contexts. Select a scenario to 
                            see which traditions are most helpful.
                        </p>

                        <div className="grid md:grid-cols-2 gap-6 mb-8">
                            {scenarios.map(scen => (
                                <div
                                    key={scen.id}
                                    onClick={() => selectScenario(scen)}
                                    className={`scenario-card bg-white border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-lg ${
                                        scenario?.id === scen.id ? 'border-purple-500 bg-purple-50' : 'border-gray-200'
                                    }`}
                                >
                                    <h3 className="text-xl font-bold text-gray-900 mb-3">{scen.title}</h3>
                                    <p className="text-gray-700 text-sm mb-4">{scen.description}</p>
                                    <div className="flex flex-wrap gap-2">
                                        <span className="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">
                                            {scen.context.stability} stability
                                        </span>
                                        <span className="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">
                                            {scen.context.resources} resources
                                        </span>
                                        <span className="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">
                                            {scen.context.timescale} timescale
                                        </span>
                                        <span className="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">
                                            {scen.context.scope} scope
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {scenario && (
                            <div className="bg-gradient-to-br from-purple-100 to-purple-50 rounded-lg p-8">
                                <h3 className="text-2xl font-bold text-purple-900 mb-4">
                                    Recommended Approaches for: {scenario.title}
                                </h3>
                                <p className="text-gray-700 mb-6">{scenario.explanation}</p>

                                <div className="grid md:grid-cols-3 gap-6">
                                    {recommendations.map(trad => (
                                        <div key={trad.id} className="bg-white rounded-lg p-6 shadow">
                                            <div className="flex items-center space-x-3 mb-4">
                                                <span className="text-4xl">{trad.icon}</span>
                                                <div>
                                                    <h4 className="font-bold text-gray-900">{trad.name}</h4>
                                                    <p className="text-sm text-gray-600">{trad.tradition}</p>
                                                </div>
                                            </div>
                                            <p className="text-sm text-purple-900 font-medium mb-2">{trad.tagline}</p>
                                            <p className="text-sm text-gray-700">{trad.metaConstructor.summary}</p>
                                        </div>
                                    ))}
                                </div>

                                <div className="mt-6 bg-white p-6 rounded-lg">
                                    <h4 className="font-semibold text-gray-900 mb-2">How to Use These Approaches:</h4>
                                    <ul className="space-y-2 text-gray-700 text-sm">
                                        {recommendations.map(trad => (
                                            <li key={trad.id}>
                                                <strong>{trad.name}:</strong> {trad.metaConstructor.strengths[0]}
                                            </li>
                                        ))}
                                    </ul>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Integration Section
        function IntegrationSection({ traditions, onComplete }) {
            useEffect(() => {
                onComplete();
            }, []);

            const levelMapping = {
                'capacity': [],
                'capability': [],
                'constructor': [],
                'meta-constructor': []
            };

            Object.values(traditions).forEach(trad => {
                levelMapping[trad.level].push(trad);
            });

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Integration Map</h2>
                        <p className="text-lg text-gray-700 mb-8">
                            See how different traditions address different aspects of the capacity ‚Üí capability ‚Üí 
                            constructor ‚Üí meta-constructor progression.
                        </p>

                        {/* Visual Map */}
                        <div className="space-y-6">
                            {Object.entries(levelMapping).map(([level, trads]) => (
                                <div key={level} className="bg-gray-50 rounded-lg p-6">
                                    <div className="flex items-center mb-4">
                                        <div className="bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-lg">
                                            {level.toUpperCase()}
                                        </div>
                                        <div className="ml-4 text-gray-600 italic">
                                            {level === 'capacity' && 'What\'s latent but suppressed'}
                                            {level === 'capability' && 'What\'s reliably performed'}
                                            {level === 'constructor' && 'What persists and repeats'}
                                            {level === 'meta-constructor' && 'What can examine and improve itself'}
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-3 gap-4">
                                        {trads.map(trad => (
                                            <div key={trad.id} className="integration-node bg-white rounded-lg p-4 shadow hover:shadow-lg">
                                                <div className="flex items-center space-x-2 mb-2">
                                                    <span className="text-3xl">{trad.icon}</span>
                                                    <div>
                                                        <p className="font-bold text-gray-900">{trad.name}</p>
                                                        <p className="text-xs text-gray-600">{trad.tradition}</p>
                                                    </div>
                                                </div>
                                                <p className="text-sm text-gray-700">{trad.tagline}</p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* Synthesis */}
                        <div className="mt-12 bg-gradient-to-br from-purple-100 to-purple-50 p-8 rounded-lg">
                            <h3 className="text-2xl font-bold text-purple-900 mb-4">The Integration</h3>
                            <div className="space-y-4 text-gray-700">
                                <p>
                                    <strong>None of these traditions is "right" or "wrong"</strong>‚Äîeach captures a different 
                                    aspect of meta-constructor capacity:
                                </p>
                                <ul className="space-y-2 ml-4">
                                    <li>‚Ä¢ <strong>Capacity-level insights:</strong> Existentialism and Buddhism show us latent potential 
                                    for self-examination and authentic creation</li>
                                    <li>‚Ä¢ <strong>Capability-level insights:</strong> Virtue ethics, care ethics, and utilitarianism 
                                    help us build reliable ethical functioning</li>
                                    <li>‚Ä¢ <strong>Constructor-level insights:</strong> Confucianism and virtue ethics show how to 
                                    create persistent patterns that maintain themselves</li>
                                    <li>‚Ä¢ <strong>Meta-constructor-level insights:</strong> Kant, Rawls, Dewey, and Buddhism provide 
                                    tools for examining and improving our ethical functioning itself</li>
                                </ul>
                                <p className="pt-4 border-t border-purple-200">
                                    <strong>The key shift:</strong> Rather than asking "Which theory is TRUE?" we ask 
                                    "Which approach enhances meta-constructor capacity in which contexts?" This allows us to 
                                    <strong> integrate insights from all traditions</strong> while understanding their contextual 
                                    limitations.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Practice Section
        function PracticeSection({ traditions, onComplete }) {
            const [currentCase, setCurrentCase] = useState(null);
            const [responses, setResponses] = useState({});

            const cases = [
                {
                    id: 1,
                    title: 'The Whistleblower Dilemma',
                    scenario: 'You discover your company is deceiving customers about product safety. Reporting it could cost you your job and harm your family. Staying silent allows harm to continue.',
                    question: 'How would different ethical traditions analyze this situation?',
                    traditions: {
                        kant: 'Kant would emphasize the categorical imperative: Can you will that everyone deceive customers when it benefits them? No‚Äîso you have a duty to report. Treating customers as mere means (deceiving them) violates their dignity. Your duty is clear regardless of consequences to you.',
                        mill: 'Mill would focus on consequences: Calculate the harm of continued deception (many customers at risk) vs. harm to your family (significant but limited). The greatest good for greatest number likely requires reporting, but we should also consider whether you could report anonymously to reduce harm to yourself.',
                        aristotle: 'Aristotle would ask about your character: What would a person of practical wisdom (phronesis) do? A virtuous person has courage to do the right thing and justice to refuse complicity. But practical wisdom also considers context‚Äîcan you find a way to stop the harm while protecting your family?',
                        gilligan: 'Care ethics would emphasize your relationships and context: You have responsibilities to customers (care for strangers who are harmed), to your company (loyalty but not complicity), and to your family (their wellbeing). How can you meet all these responsibilities? Perhaps reporting while seeking support?'
                    },
                    integration: 'An integrated approach recognizes you have principled duties (Kant), must consider consequences (Mill), should act from developed character (Aristotle), and must navigate relationships (care ethics). The key is diagnosing your context: Do you have meta-constructor capacity to examine options and find creative solutions? Or has the situation degraded your capacity (fear, pressure) requiring external support first?'
                },
                {
                    id: 2,
                    title: 'Resource Allocation Crisis',
                    scenario: 'Your hospital has one ventilator left and two patients who need it. Patient A is 80 years old with poor prognosis. Patient B is 40 years old with better chances. Both will likely die without it.',
                    question: 'How would different traditions guide this tragic choice?',
                    traditions: {
                        mill: 'Utilitarianism would calculate: Patient B has more years of life to gain, better quality of life prognosis, perhaps dependents. Maximizing wellbeing suggests prioritizing B. But we should also consider: Does this create precedent that devalues elderly lives systematically?',
                        kant: 'Kant would struggle with this: Both patients have equal dignity as rational beings. You cannot use A as mere means to save B. Perhaps the only ethical option is random selection (lottery) since both have equal moral status. Or: Could both be given sequential access rather than zero-sum?',
                        rawls: 'Rawls would ask what principle you would choose from behind a veil of ignorance (not knowing if you\'re A or B). Perhaps: maximize expected years of life, but with protections ensuring elderly aren\'t systematically deprioritized. Consider whether age-based allocation violates equal basic liberties.',
                        gilligan: 'Care ethics would emphasize the particular contexts: What do A and B want? Do they have families with input? Is this a one-time crisis or system failure? Rather than abstract principles, attune to the specific people and relationships involved. Perhaps the decision should involve family consultation.'
                    },
                    integration: 'This tragic choice reveals limits of any single approach. Utilitarian calculation seems heartless; Kantian dignity seems impractical; care ethics might not resolve the dilemma. An integrated approach acknowledges: (1) the context degrading meta-constructor capacity (crisis overwhelms deliberation), (2) need for fair procedures decided in advance (Rawls), (3) recognition of genuine tragedy (not all dilemmas have "right" answers), (4) importance of transparent reasoning whatever is chosen.'
                },
                {
                    id: 3,
                    title: 'Cultural Practice Conflict',
                    scenario: 'You\'re a physician. A family refuses medical treatment for their child based on religious beliefs. The child will likely suffer serious harm without treatment, but respecting religious freedom is important.',
                    question: 'How do different traditions approach conflicts between autonomy and harm?',
                    traditions: {
                        kant: 'Kant would distinguish: Parents have autonomy, but children also have dignity. You cannot treat the child as mere means to express parents\' religious freedom. The child\'s capacity for rational autonomy (future) must be protected. Kant would likely require treatment despite parents\' objections.',
                        mill: 'Mill\'s harm principle: Adults can refuse treatment for themselves (their liberty), but cannot impose serious harm on others. The child cannot consent and will suffer irreversible harm. Mill would allow intervention to prevent harm to the child, while respecting maximum adult liberty.',
                        confucius: 'Confucian ethics would emphasize relationships and social harmony: Can you find a way to respect the family\'s beliefs while protecting the child? Perhaps dialogue to understand their concerns, seeking middle ground, involving religious community leaders. Relationships should be maintained where possible.',
                        rawls: 'Rawls would ask: What basic liberties take precedence? Religious freedom is fundamental, but so is bodily integrity and health. From original position (not knowing if you\'re parent or child), you would likely prioritize child\'s welfare since they cannot advocate for themselves.'
                    },
                    integration: 'This case requires recognizing multiple levels: (1) Immediate capacity question (is the child\'s meta-constructor capacity being permanently damaged?), (2) Contextual sensitivity (understanding the family\'s worldview), (3) Principled grounding (protecting those who cannot protect themselves), (4) Relational approach (can dialogue find creative solutions?). An integrated approach would exhaust dialogue options while clearly prioritizing child welfare if necessary.'
                }
            ];

            const selectCase = (caseItem) => {
                setCurrentCase(caseItem);
                if (!responses[caseItem.id]) {
                    setResponses({ ...responses, [caseItem.id]: {} });
                }
                onComplete();
            };

            return (
                <div className="space-y-8">
                    <div className="bg-white rounded-lg shadow-lg p-8">
                        <h2 className="text-3xl font-bold text-gray-900 mb-4">Practice Scenarios</h2>
                        <p className="text-lg text-gray-700 mb-6">
                            Apply different ethical traditions to real dilemmas. See how each tradition offers 
                            different insights and how integration provides fuller understanding.
                        </p>

                        <div className="grid md:grid-cols-3 gap-6 mb-8">
                            {cases.map(caseItem => (
                                <div
                                    key={caseItem.id}
                                    onClick={() => selectCase(caseItem)}
                                    className={`bg-white border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-lg ${
                                        currentCase?.id === caseItem.id ? 'border-purple-500 bg-purple-50' : 'border-gray-200'
                                    }`}
                                >
                                    <h3 className="text-xl font-bold text-gray-900 mb-3">{caseItem.title}</h3>
                                    <p className="text-gray-700 text-sm">{caseItem.scenario}</p>
                                </div>
                            ))}
                        </div>

                        {currentCase && (
                            <div className="bg-gray-50 rounded-lg p-8">
                                <button
                                    onClick={() => setCurrentCase(null)}
                                    className="mb-6 text-purple-600 hover:text-purple-700 flex items-center"
                                >
                                    ‚Üê Back to cases
                                </button>

                                <h3 className="text-2xl font-bold text-gray-900 mb-4">{currentCase.title}</h3>
                                <div className="bg-white p-6 rounded-lg mb-6">
                                    <h4 className="font-semibold text-gray-900 mb-2">Scenario:</h4>
                                    <p className="text-gray-700 mb-4">{currentCase.scenario}</p>
                                    <h4 className="font-semibold text-gray-900 mb-2">Question:</h4>
                                    <p className="text-purple-700 font-medium">{currentCase.question}</p>
                                </div>

                                <h4 className="text-xl font-bold text-gray-900 mb-4">Perspectives from Different Traditions:</h4>
                                <div className="space-y-4 mb-6">
                                    {Object.entries(currentCase.traditions).map(([tradId, analysis]) => {
                                        const trad = traditions[tradId];
                                        return (
                                            <div key={tradId} className="bg-white rounded-lg p-6 border-l-4 border-purple-500">
                                                <div className="flex items-center space-x-3 mb-3">
                                                    <span className="text-3xl">{trad.icon}</span>
                                                    <div>
                                                        <h5 className="font-bold text-gray-900">{trad.name}</h5>
                                                        <p className="text-sm text-gray-600">{trad.tradition}</p>
                                                    </div>
                                                </div>
                                                <p className="text-gray-700">{analysis}</p>
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="bg-gradient-to-br from-purple-100 to-purple-50 rounded-lg p-6">
                                    <h4 className="text-xl font-bold text-purple-900 mb-3">Integrated Analysis</h4>
                                    <p className="text-gray-700">{currentCase.integration}</p>
                                </div>

                                <div className="mt-6 bg-yellow-50 border-l-4 border-yellow-500 p-6 rounded">
                                    <h4 className="font-semibold text-yellow-900 mb-2">Reflection Question:</h4>
                                    <p className="text-gray-700 mb-3">
                                        Which tradition's analysis resonates most with you for this case? Why? 
                                        What would YOU do in this situation, and which combination of insights 
                                        would guide you?
                                    </p>
                                    <p className="text-sm text-gray-600 italic">
                                        Consider discussing this with classmates or journaling your response.
                                    </p>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Render the app
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
